

■ユースケース
目的：
個人でWebサイトを運営する
運営者のみテキストコンテンツを投稿できる

閲覧ユーザー数：
月間10名程度がアクセスする想定

コスト：
収益性がないため、コストは最小化を目指す

その他：
以下2案で比較検討する
①できるだけAWSのサービスを使用して実現する場合
②コスト最小化のためのプランを検討する



■要件定義(何がしたいのか)

・機能要件
コンテンツ管理機能:
運営者のみがテキストコンテンツを投稿・編集・削除可

閲覧機能:
登録不要で、閲覧者がコンテンツを自由に閲覧できる

認証機能:
運営者のみが投稿できるようにログイン機能を実装


・非機能要件
1.可用性：
常時稼働は必要ないが、安定稼働を確保

2.性能・拡張性：
小規模トラフィック（月間10名程度）を考慮

3.セキュリティ：
運営者のみが投稿できるように基本的な認証機能を実装
HTTPS通信

4.運用保守：
運用コストを最小限に抑える
バックアップは低頻度で十分



■基本設計(どう実現するのか)

①インフラ構成(できればスケーラブルにする)
Amazon Lightsail（WordPress）
管理・運用環境を構築
コスト試算：
月額固定の最低料金
3.5USD/M

Aurora Serverless（MySQL）
データベースの可用性とスケーラビリティを確保
コスト試算：
従量課金
月間10ユーザー程度のアクセスのため10USD未満を想定
※ユーザー増加の場合、想定外のコストが発生する可能性あり

代替案１：
Lightsailのデータベースオプション
※月額固定　15USD

代替案２：
Aurora DynamoDB
※従量課金

S3 + CloudFront
※HTTPSの使用にはCloudFrontが必須
S3で静的コンテンツをホスティングし、CloudFront を利用してコンテンツ配信のパフォーマンスを向上
コスト試算：
ストレージ費用・データ転送費用を含めて月額2USD以内を想定

Route 53
ドメイン管理
コスト試算：
.click を登録
3USD

Certificate Manager
SSL証明書の管理、HTTPS
コスト試算：
無料


結論：不採用
費用が大きい
小規模サイトにしてはオーバースペック


②インフラ構成
Amazon Lightsail（WordPress）
管理・運用環境を構築
コスト試算：
月額固定の最低料金
3.5USD/M

Route 53
Route53でドメイン登録・Aレコード作成
lightsail.nao-domain.click
コスト試算：
.click を登録
3USD

Let's Encrypt
Let’s Encryptを使用し、無料SSL証明書を発行
sudo /opt/bitnami/bncert-tool
https://lightsail.nao-domain.click
https://lightsail.nao-domain.click/wp-admin/
コスト試算：
無料(Wordpress使用の場合、こちらのほうが楽)


結論：採用
コスト最小かつ、管理が楽


②機能要件の実現

コンテンツ管理：
運営者のみが投稿・編集できるWordPressサイトの使用

閲覧機能：
誰でもコンテンツを閲覧できる

認証機能：
WordPressの管理者認証
LightsailインスタンスへのSSHアクセス


②非機能要件の実現

1.可用性：
Lightsailインスタンスが稼働し続ける限り担保される
※スケーリングには手動での停止・再起動が必要になる

2.性能・拡張性：
512MB RAM
1vCPU
20GB SSD
小規模トラフィック（10名/月）には性能として十分

3.セキュリティ：
Let's EncryptでHTTPS対応
WordPressの管理画面・サーバーへのSSHアクセスに対して、パスワード認証実装

4.運用保守：
コンソールよりLightsailのバックアップを手動で取得可能
WordPressのプラグイン(BackWPup)でバックアップ機能は実装可能


■詳細設計
詳細設計書≒パラメータシート
CloudFormationのスタックテンプレートファイルを成果物とする

case1.yaml


■構築
CDK(TypeScript)によって実施


■単体テスト
CDKのアサーションテストを実施

