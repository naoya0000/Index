

■ユースケース
目的：
個人でWebサイトを運営し、運営者のみがテキストコンテンツを投稿できるようにする

閲覧ユーザー数：
月間10名程度のアクセスを想定

コスト：
収益性がないため、コストを最小化する

比較検討：
① 将来的な機能拡張やユーザー増加に備えるプラン
② コスト最小化プラン



■要件定義

・機能要件
1.コンテンツ管理機能:
運営者のみがテキストコンテンツを投稿・編集・削除できる

2.閲覧機能:
ユーザー登録不要で、全ての閲覧者が自由にコンテンツを閲覧できる

3.認証機能:
運営者専用のログイン機能を実装し、投稿や編集操作を運営者に限定する


・非機能要件
1.可用性：
常時稼働は不要だが、安定した稼働を確保する

2.性能・拡張性：
小規模トラフィック（月間10名程度）に対応する
拡張性は必須ではない

3.セキュリティ：
基本的な認証機能を実装し、運営者のみが投稿できるようにする
HTTPS対応を必須とする

4.運用保守：
運用コストを最小限に抑え、低頻度バックアップを設定する



■基本設計

コスト計算(AWS Pricing Calculator)
https://calculator.aws/#/addService


①将来的な機能拡張やユーザー増加に備えるプラン

■インフラ構成

Lightsail（WordPress）：3.5USD/月（固定料金）
・WordPressを利用し、運用環境を構築

移行案：EC2
Lightsailインスタンスからスナップショットを作成し、EC2にエクスポート
https://dev.classmethod.jp/articles/reinvent2018-upgrade-lightsail-to-ec2/

Aurora Serverless（MySQL）：従量課金
・初期段階では不要だが、将来的な拡張とスケーラビリティを考慮して使用を検討

代替案：Lightsailのデータベースオプション：15USD/月（固定料金）
代替案：DynamoDB：複雑な使用用途がない場合に検討

S3 + CloudFront：従量課金
・将来的に大容量の静的ファイル(動画や音声ファイル等)を配信する場合に検討
・S3で静的コンテンツをホスティング、CloudFrontでコンテンツ配信とHTTPS対応

Route53：3USD/年
・ドメイン登録（.click）

Certificate Manager：無料
・無料でSSL証明書を発行し、HTTPS対応


■結論：不採用
・コストが大きい
・小規模なサイトにはオーバースペック


②コスト最小化プラン

■インフラ構成

Lightsail（WordPress）：3.5USD/月（固定料金）
・WordPressを利用し、運用環境を構築
・WordPress内部データベースを使用

Route53：3USD/年
・ドメイン登録（.click）

Let's Encrypt：無料
・無料SSL証明書を発行し、HTTPS対応


■結論：採用
・コストが小さい
・個人運営に際し、運用コストが小さい



■機能要件の実現

1.コンテンツ管理：
WordPressを利用し、運営者のみが投稿や編集を行うことが可能

2.閲覧機能：
誰でも自由にコンテンツを閲覧可能

3.認証機能：
WordPressの管理者認証機能を使用
LightsailインスタンスへのSSHアクセスは適切に保護



■非機能要件の実現

1.可用性：
Lightsailインスタンスの稼働により可用性を担保
※スケーリングは手動で対応

2.性能・拡張性：
nanoインスタンス (512MB RAM, 1vCPU, 20GB SSD) で月間10名程度のトラフィックに対応可能

3.セキュリティ：
Let's EncryptでHTTPS対応
WordPress管理画面でパスワード認証を実装

4.運用保守：
Lightsailコンソールで手動バックアップが可能
WordPressのプラグイン（BackWPup）で定期的なバックアップも実施可能



■詳細設計 ≒ パラメータシート

成果物：
CloudFormationスタックテンプレート（case1.yaml）を使用



■構築
CDK (TypeScript) によりインフラを構築


■単体テスト
CDKのアサーションテストを実施

